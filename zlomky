#include <stdio.h>

// Funkce pro nejvetsi spolecny delitel (NSD / GCD)
int nsd(int a, int b) {
    while (b != 0) {
        int temp = b;
        b = a % b;
        a = temp;
    }
    return a;
}

// Funkce pro prevod na smisen√© cislo
void smisene_cislo(int citatel, int jmenovatel, int *cela_cast, int *nova_citatel) {
    *cela_cast = citatel / jmenovatel;
    *nova_citatel = citatel % jmenovatel;
}

// Funkce pro nacteni cisla s kontrolou 'a' pro ukonceni
int nacti_cislo() {
    int cislo;
    char ch;
    while (1) {
        if (scanf("%d", &cislo) == 1) {
            return cislo;
        } else {
            ch = getchar();
            if (ch == 'a' || ch == 'A') {
                return -1; // specialni hodnota pro ukonceni
            }
            printf("Neplatny vstup. Zadavej cisla nebo 'a' pro ukonceni.\n");
            while ((ch = getchar()) != '\n' && ch != EOF) { }
        }
    }
}

int main(void) {
    int a, b, c, d, vysledek_citatel, vysledek_jmenovatel;
    char e;

    printf("Zadej citatel zlomku jedna\n");
    a = nacti_cislo();
    if (a == -1) return 0;

    printf("Zadej jmenovatel zlomku jedna\n");
    b = nacti_cislo();
    if (b == -1) return 0;

    printf("Zadej citatel zlomku dva\n");
    c = nacti_cislo();
    if (c == -1) return 0;

    printf("Zadej jmenovatel zlomku dva\n");
    d = nacti_cislo();
    if (d == -1) return 0;

    printf("Co chces delat za operaci? + pro addici, - pro subtrakci, * pro multiplikaci, / pro divizi ");
    scanf(" %c", &e);

    if (e == '/') {
        vysledek_citatel = a * d;
        vysledek_jmenovatel = b * c;
    } else if (e == '*') {
        vysledek_citatel = a * c;
        vysledek_jmenovatel = b * d;
    } else if (e == '-') {
        vysledek_citatel = a * d - c * b;
        vysledek_jmenovatel = b * d;
    } else if (e == '+') {
        vysledek_citatel = a * d + c * b;
        vysledek_jmenovatel = b * d;
    }

    // Kraceni zlomku
    int delitel = nsd(vysledek_citatel, vysledek_jmenovatel);
    vysledek_citatel /= delitel;
    vysledek_jmenovatel /= delitel;

    // Smisene cislo
    int cela_cast, nova_citatel;
    smisene_cislo(vysledek_citatel, vysledek_jmenovatel, &cela_cast, &nova_citatel);

    // Vypis vysledku
    printf("vysledek je: %d / %d (zakladni tvar), ", vysledek_citatel, vysledek_jmenovatel);
    if (nova_citatel != 0) {
        printf("%d %d/%d (smisene cislo)\n", cela_cast, nova_citatel, vysledek_jmenovatel);
    } else {
        printf("%d (cela cislo)\n", cela_cast);
    }

    return 0;
}
